<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PG Rent Tracker</title>
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <link rel="stylesheet" href="style.css" />

    <!-- Cropper -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <!-- Chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Firebase (REQUIRED) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>

<body>

    <!-- LOGIN -->
    <div id="loginScreen" class="login">
        <h2>ğŸ” Admin Login</h2>
        <input type="password" id="pin" placeholder="Enter PIN">
        <button onclick="login()">Login</button>
    </div>

    <!-- APP -->
    <div id="app" style="display:none">

        <header>
            <h1>ğŸ  PG Rent Tracker</h1>
            <button onclick="toggleTheme()">ğŸŒ™</button>
        </header>

        <div class="month-bar">
            <label>ğŸ“… Month</label>
            <select id="monthSelector" onchange="changeMonth(this.value)"></select>
        </div>

        <!-- FORM -->
        <section class="form">
            <input id="nameInput" placeholder="Tenant Name">
            <input id="roomInput" placeholder="Room No">
            <input id="phoneInput" placeholder="WhatsApp Number">
            <input id="rentInput" type="number" placeholder="Monthly Rent">
            <input id="dueDateInput" type="number" min="1" max="31" placeholder="Due Day">
            <input type="file" id="photoInput" accept="image/*">
            <button onclick="addTenant()">â• Add Tenant</button>
        </section>

        <section style="padding:10px">
            <canvas id="chart"></canvas>
        </section>

        <section id="tenantList" class="cards"></section>

        <footer class="summary">
            <div>Paid â‚¹<span id="paidEl">0</span></div>
            <div>Pending â‚¹<span id="pendingEl">0</span></div>
        </footer>
    </div>

    <!-- CROP MODAL (ONLY ONE) -->
    <div id="cropModal" class="crop-modal">
        <div class="crop-box">
            <img id="cropImage">
            <button onclick="saveCropped()">Save</button>
            <button onclick="cancelCrop()">Cancel</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>